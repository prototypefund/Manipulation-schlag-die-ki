<countdown>

    <h1>{this.value}</h1>

    <script>

        /* tag parameters
        opts.lengths: Length of the countdown
        opts.ontimeout: Function to call when instruction have been visible for the specified amount */

        tag = this;
        tag.value =  Number(opts.length) || 3;
        tag.timer = null;

        tag.initTimer = function() {
            tag.timer = setInterval(tag.updateValue, 1000);
        };

        tag.updateValue = function(){
            if (tag.value > 1){
                tag.value -=1;
                tag.update();
            }
            else {
                tag.stopTimer();
                opts.ontimeout();
            }
        };

        tag.stopTimer = function() {
            clearInterval(tag.timer);
        };

        tag.on("mount", tag.initTimer);
    </script>
</countdown>
