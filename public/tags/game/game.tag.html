<game>

    <h1 class="centered"> Runde 1 </h1>

    <instructions class="centered {hidden: instructions.hidden}"
                  text={instructions.text}
                  visibleFor="3"
                  callback={this.startChallenge}></instructions>

    <challenge class="centered {hidden: challenge.hidden}"
               image={opts.image}></challenge>

    <answers class="centered"
             answers={opts.answers}
             correct={opts.correct}
             disabled={this.answers.disabled}
             callback={this.answerSelected}></answers>

    <timer class="centered {hidden2: timer.hidden}"
           length=3
           callback={tag.timeout}
           controller={timer.controller}></timer>


    <script>
        var tag = this;

        // state of the nested tags
        tag.answers = {"disabled": false};
        tag.challenge = {"hidden": true};
        tag.instructions = {"hidden": false, "text": TEXT.intro};
        tag.timer = {"hidden": true, "controller": riot.observable()};

        tag.startChallenge = function(){
            tag.challenge.hidden=false;
            tag.instructions.hidden=true;
            tag.timer.hidden = false;
            tag.timer.controller.trigger("start");
            tag.update();
        };

        tag.answerSelected = function(isCorrect){
            tag.timer.controller.trigger("stop");
            tag.answers.disabled = true;
            tag.update()
        };

        tag.timeout = function() {
            tag.answers.disabled = true;
            tag.update();
        };
    </script>
</game>



<challenge>
    <img src={opts.image} class="challenge" alt="challenge image"/>
</challenge>

