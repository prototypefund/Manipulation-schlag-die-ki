<game>
    <h2 class="round">Runde 1</h2>
    <div class="main">
        <instructions class={hidden: instructions.hidden}
                      text={instructions.text}
                      visibleFor="3"
                      ontimeout={startChallenge}></instructions>
        <challenge class={hidden: challenge.hidden} image={opts.image}></challenge>
    </div>

    <answers answers={opts.answers}
             correct={opts.correct}
             disabled={answers.disabled}
             onselected={answerSelected}></answers>

    <div class="human">
        <scoreboard name="DU" score={this.human.score} status={this.human.status} result={this.human.result}></scoreboard>
    </div>

    <div class="machine">
        <scoreboard name="KI" score={this.machine.score} status={this.machine.status} result={this.machine.result}></scoreboard>
    </div>

    <script>
        var tag = this;
        let resultNames = {true: "correct", false: "incorrect"};

        // state of the nested tags
        tag.instructions = {"hidden": false, "text": TEXT.intro};
        tag.challenge = {"hidden": true};
        tag.answers = {"disabled": true};

        tag.human = {"status": null, "score": 0, "result": null};
        tag.machine = {"status": null, "score": 0, "result": null};

        tag.startChallenge = function(){
            tag.challenge.hidden=false;
            tag.instructions.hidden=true;
            tag.answers.disabled = false;

            tag.human.status = "waiting";
            tag.machine.status = "waiting";

            tag.update();

            // fake the AI
            setTimeout(tag.machineFinished, 300);
        };

        tag.answerSelected = function(isCorrect){
            tag.human.status = "finished";
            tag.human.result = resultNames[isCorrect];
            tag.answers.disabled = true;
            tag.update();
        };

        tag.machineFinished = function() {
            tag.machine.status = "finished";
            tag.machine.result = "correct";
            tag.update()
        };
    </script>
</game>



<challenge>
    <img src={opts.image} class="challenge" alt="challenge image"/>
</challenge>



